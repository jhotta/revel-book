= Revelã§é–‹ç™ºã™ã‚‹ãŸã‚ã®ç’°å¢ƒã®æº–å‚™

//lead{
Goè¨€èªã‚’ä½¿ã£ã¦RevelãŒã€èµ·å‹•ã§ãã‚‹ç’°å¢ƒã‚’æ§‹ç¯‰ã—ã¦ã„ãã¾ã™ã€‚
//}


== å„ç¨®ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

=== VitualBoxã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

ã“ã®æœ¬ã§ã¯ã€VirtualBoxã‚’åˆ©ç”¨ã—ã¦ãƒ™ãƒ¼ã‚¹ã¨ãªã‚‹LinuxOSã‚’èµ·å‹•ã™ã‚‹ã“ã¨ã«ã—ã¾ã™ã€‚
VirtualBoxã¯ã€ä»¥ä¸‹ã®@<href>{https://www.virtualbox.org/wiki/Downloads, ãƒšãƒ¼ã‚¸URL}ã‹ã‚‰ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã§ãã¾ã™ã€‚

ä»Šä½œæ¥­ã—ã¦ã„ã‚‹PCã®OSã«é©å¿œã—ãŸVirtualBoxã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ã€ã“ã®ã‚µã‚¤ãƒˆã‹ã‚‰ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ã¾ã™ã€‚

//image[vb_dl][VirtualBoxã®ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ãƒšãƒ¼ã‚¸]{
//}

å…ˆã«ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ãŸVirtualBoxã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ãƒ€ãƒ–ãƒ«ã‚¯ãƒªãƒƒã‚¯ã—ã€ãƒãƒƒãƒ—ã‚¢ãƒƒãƒ—ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã®æŒ‡ç¤ºã«å¾“ã£ã¦VirtualBoxã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ«ã—ã¾ã™ã€‚

//image[vb_inst1][ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«å›³1]{
//}

ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ãŸãƒ•ã‚¡ã‚¤ãƒ«ã‚’ãƒ€ãƒ–ãƒ«ã‚¯ãƒªãƒƒã‚¯ã—ã€ãƒãƒƒãƒ—ã‚¢ãƒƒãƒ—ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã®æŒ‡ç¤ºã«å¾“ã„VirtualBoxã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ«ã—ã¾ã™ã€‚

//image[vb_inst2][ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«å›³2]{
//}

ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ãŸãƒ•ã‚¡ã‚¤ãƒ«ã‚’ãƒ€ãƒ–ãƒ«ã‚¯ãƒªãƒƒã‚¯ã—ã€ãƒãƒƒãƒ—ã‚¢ãƒƒãƒ—ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã®æŒ‡ç¤ºã«å¾“ã„VirtualBoxã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ«ã—ã¾ã™ã€‚

//image[vb_inst3][ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«å›³3]{
//}

ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ãŸãƒ•ã‚¡ã‚¤ãƒ«ã‚’ãƒ€ãƒ–ãƒ«ã‚¯ãƒªãƒƒã‚¯ã—ã€ãƒãƒƒãƒ—ã‚¢ãƒƒãƒ—ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã®æŒ‡ç¤ºã«å¾“ã„VirtualBoxã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ«ã—ã¾ã™ã€‚


=== Vagrantã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

VirtualBoxã¯ç›´æ¥æ“ä½œã—ã¦ã‚‚ç‰¹ã«å•é¡Œã¯ãªã®ã§ã™ãŒã€ä»®æƒ³OSç’°å¢ƒã‚’åŠ¹ç‡ã‚ˆãæ“ä½œã™ã‚‹ã¨å…±ã«åŸºæœ¬ç’°å¢ƒã®æ§‹ç¯‰ã®å†ç¾æ€§ã‚’ä¸Šã’ã‚‹ãŸã‚ã«ã€ä»Šå›ã¯Vagrantã‚’ä½¿ç”¨ã™ã‚‹ã“ã¨ã«ã—ã¾ã™ã€‚

Vagrantã¯ã€ä»¥ä¸‹ã®@<href>{http://www.vagrantup.com/downloads.html, ãƒšãƒ¼ã‚¸URL}ã‹ã‚‰ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã§ãã¾ã™ã€‚

ä»Šä½œæ¥­ã—ã¦ã„ã‚‹PCã®OSã«é©å¿œã—ãŸVirtualBoxã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ã€ã“ã®ã‚µã‚¤ãƒˆã‹ã‚‰ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ã¾ã™ã€‚

//image[vg_dl][Vagrantã®ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ãƒšãƒ¼ã‚¸]{
//}

å…ˆã«ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ãŸVirtualBoxã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ãƒ€ãƒ–ãƒ«ã‚¯ãƒªãƒƒã‚¯ã—ã€ãƒãƒƒãƒ—ã‚¢ãƒƒãƒ—ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã®æŒ‡ç¤ºã«å¾“ã£ã¦VirtualBoxã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ«ã—ã¾ã™ã€‚

//image[vg_inst1][ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«å›³1]{
//}

ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ãŸãƒ•ã‚¡ã‚¤ãƒ«ã‚’ãƒ€ãƒ–ãƒ«ã‚¯ãƒªãƒƒã‚¯ã—ã€ãƒãƒƒãƒ—ã‚¢ãƒƒãƒ—ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã®æŒ‡ç¤ºã«å¾“ã„Vagrantã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ«ã—ã¾ã™ã€‚

//image[vg_inst2][ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«å›³2]{
//}

ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ãŸãƒ•ã‚¡ã‚¤ãƒ«ã‚’ãƒ€ãƒ–ãƒ«ã‚¯ãƒªãƒƒã‚¯ã—ã€ãƒãƒƒãƒ—ã‚¢ãƒƒãƒ—ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã®æŒ‡ç¤ºã«å¾“ã„Vagrantã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ«ã—ã¾ã™ã€‚

//image[v_inst3][ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«å›³3]{
//}

ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ãŸãƒ•ã‚¡ã‚¤ãƒ«ã‚’ãƒ€ãƒ–ãƒ«ã‚¯ãƒªãƒƒã‚¯ã—ã€ãƒãƒƒãƒ—ã‚¢ãƒƒãƒ—ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã®æŒ‡ç¤ºã«å¾“ã„Vagrantã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ«ã—ã¾ã™ã€‚

ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ãŒå®Œäº†ã—ãŸã¨ã“ã‚ã§ã€Vagrantã®æ“ä½œã‚’ã™ã‚‹ã™ã‚‹ãŸã‚ã«ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã‚’èµ·å‹•ã—ã¾ã™ã€‚OSXã§ã‚ã‚Œã°ã€terminalã‚’å®Ÿè¡Œã—ã€ã‚³ãƒãƒ³ãƒ‰ã‚’å…¥åŠ›ã™ã‚‹ã“ã¨ã«ãªã‚Šã¾ã™ã€‚



//cmd{
$ vagrant --version
//}

ä»¥ä¸‹ã®å†…å®¹ãŒè¡¨ç¤ºã•ã‚Œã‚Œã°ã€Vagrantã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã¯çµ‚äº†ã§ã™ã€‚

//cmd{
Vagrant 1.4.3
//}


=== ä»®æƒ³ãƒã‚·ãƒ³ã‚¤ãƒ¡ãƒ¼ã‚¸ã®æº–å‚™ 

http://www.vagrantbox.es/

//image[v_inst3][ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«å›³3]{
//}

ä»Šå›ã¯ã€"Official Ubuntu 13.10 daily Cloud Image amd64 (Development release, No Guest Additions)"ã¨æ›¸ã‹ã‚Œã¦ã„ã‚‹ä»®æƒ³ãƒã‚·ãƒ³ãƒ¡ãƒ¼ã‚¸ã‚’Vagrantã®ç®¡ç†ä¸‹ã«ã‚¤ãƒ³ãƒãƒ¼ãƒˆã—ã¦ä½¿ã†ã“ã¨ã«ã—ã¾ã™ã€‚

ã‚³ãƒãƒ³ãƒ‰ã®åŸºæœ¬ã¯ä»¥ä¸‹ã®ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã«ãªã‚Šã¾ã™ã€‚

//cmd{
$ vagrant box add {title} {url}
//}

ä»Šå›ã¯ã€ubuntuã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ãƒ¼ãŒæä¾›ã—ã¦ã„ã‚‹	å…ˆã®ä»®æƒ³ã‚¤ãƒ¡ãƒ¼ã‚¸ã®urlã‚’æŒ‡å®šã—ã€ubuntuã‚’titleã«æŒ‡å®šã—ã€Vagrantç®¡ç†ä¸‹ã«ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ã¦ãã¾ã™ã€‚

//cmd{
$ vagrant box add ubuntu \
http://cloud-images.ubuntu.com/vagrant/saucy/current/\
saucy-server-cloudimg-amd64-vagrant-disk1.box
//}

ä¸Šè¨˜ã®ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã™ã‚‹ã¨ã€ä¸‹è¨˜ã®å†…å®¹ãŒã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã‚¦ã‚¤ãƒ³ãƒ‰ãƒ¼ã«è¡¨ç¤ºã•ã‚Œã€ä»®æƒ³OSç”¨ã®ã‚¤ãƒ¡ãƒ¼ã‚¸ã®ç™»éŒ²ãŒçµ‚äº†ã—ã¾ã™ã€‚

//cmd{
Downloading box from URL: http://cloud-images.ubuntu.com/vagrant/saucy/current/saucy-server-cloudimg-amd64-vagrant-disk1.box
Extracting box...te: 1131k/s, Estimated time remaining: --:--:--)
Successfully added box 'ubuntu' with provider 'virtualbox'!
//}

ä¸‡ãŒä¸€ã€ä»®æƒ³OSã®ã‚¤ãƒ¡ãƒ¼ã‚¸ç™»éŒ²ã«å¤±æ•—ã—ãŸå ´åˆã‚„ã‚¤ãƒ¡ãƒ¼ã‚¸ãŒä¸è¦ã«ãªã£ãŸå ´åˆã¯ã€ä»¥ä¸‹ã®listã‚³ãƒãƒ³ãƒ‰ã§ç¢ºèªã®ä¸Šã€å‰Šé™¤ã§ãã¾ã™ã€‚

//cmd{
$ vagrant box list
$ vagrant box revmove {title}
//}

ãã‚Œã§ã¯ã€vagrantã«å¿…è¦ãªãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç½®ã„ã¦ãŠããƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãƒ¼ã‚’ä½œã‚‹ã“ã¨ã«ã—ã¾ã™ã€‚	

//cmd{
$ mkdir ~/vagrant-env
$ cd ~/vagrant-env
//}

ä¸‹è¨˜ã®ãƒ•ã‚£ãƒ¼ãƒãƒƒãƒˆã®ã‚³ãƒãƒ³ãƒ‰ã‚’ä½¿ã£ã¦Vagarantfileã‚’ç”Ÿæˆã—ã¾ã™ã€‚

//cmd{
$ vagrant init {title}
//}

{title}ã®éƒ¨åˆ†ã«ã¯ã€å…ˆã»ã©æŒ‡å®šã—ãŸä»®æƒ³OSã‚¤ãƒ¡ãƒ¼ã‚¸åã‚’æŒ‡å®šã—ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ã¾ã™ã€‚

//cmd{
$ vagrant init ubuntu
//}

ä¸‹è¨˜ã®ã‚ˆã†ãªå®Ÿè¡Œã‹çµæœãŒè¡¨ç¤ºã•ã‚Œã¦ã„ã‚‹ç¢ºèªã—ã¦ãã ã•ã„ã€‚

//cmd{
A `Vagrantfile` has been placed in this directory. You are now
ready to `vagrant up` your first virtual environment! Please read
the comments in the Vagrantfile as well as documentation on
`vagrantup.com` for more information on using Vagrant.
//}

ãã‚Œã§ã¯ã€ã“ã“ã§ä»®æƒ³OSã‚’èµ·å‹•ã—ã¦ã¿ã¾ã™ã€‚

//cmd{
$ vagrant up
//}

ç”»é¢ã¯ã€æµã‚Œã‚‹ã‚ˆã†ã«é€²ã‚“ã§ã„ãã¾ã™ã€‚æœ€çµ‚çš„ã«ã¯ä»¥ä¸‹ã®ã‚ˆã†ãªå†…å®¹ã®ç”»é¢ãŒè¡¨ç¤ºã•ã‚Œã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚

//cmd{
Bringing machine 'default' up with 'virtualbox' provider...
[default] Importing base box 'ubuntu'...
[default] Matching MAC address for NAT networking...
[default] Setting the name of the VM...
[default] Clearing any previously set forwarded ports...
[default] Clearing any previously set network interfaces...
[default] Preparing network interfaces based on configuration...
[default] Forwarding ports...
[default] -- 22 => 2222 (adapter 1)
[default] Booting VM...
[default] Waiting for machine to boot. This may take a few minutes...
[default] Machine booted and ready!
[default] The guest additions on this VM do not match the installed version of
VirtualBox! In most cases this is fine, but in rare cases it can
prevent things such as shared folders from working properly. If you see
shared folder errors, please make sure the guest additions within the
virtual machine match the version of VirtualBox you have installed on
your host and reload your VM.

Guest Additions Version: 4.2.16
VirtualBox Version: 4.3
[default] Mounting shared folders...
[default] -- /vagrant
//}

ä»®æƒ³OSãŒèµ·å‹•ã—ã¦ã„ã‚‹å¤œãªã‚‰ã€sshã§ä»®æƒ³ç’°å¢ƒã«ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹ã“ã¨ã«ã—ã¾ã™ã€‚

//cmd{
$ vagrant ssh
//}

ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ãŒã€è¡¨ç¤ºã•ã‚Œã¦ã„ã‚‹ã§ã—ã‚‡ã†ã‹ï¼Ÿ

//cmd{
Please report a bug if this causes problems.
Welcome to Ubuntu 13.10 (GNU/Linux 3.11.0-17-generic x86_64)

 * Documentation:  https://help.ubuntu.com/

  System information as of Wed Feb 26 04:07:30 UTC 2014

  System load:  0.98              Processes:           86
  Usage of /:   2.6% of 39.34GB   Users logged in:     0
  Memory usage: 28%               IP address for eth0: 10.0.2.15
  Swap usage:   0%

  Graph this data and manage this system at:
    https://landscape.canonical.com/

  Get cloud support with Ubuntu Advantage Cloud Guest:
    http://www.ubuntu.com/business/services/cloud

0 packages can be updated.
0 updates are security updates.

vagrant@vagrant-ubuntu-saucy-64:~$
//}

ã“ã“ã¾ã§ã§ã€Vagarantã«ã‚ˆã£ã¦ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«ã§ãã‚‹ä»®æƒ³ç’°å¢ƒãŒã§ãã¾ã—ãŸã€‚
ãã‚Œã§ã¯ã€ä»®æƒ³OSç’°å¢ƒã®ã‚·ã‚§ãƒ«ã‹ã‚‰ã€æœ¬ä½“ã®ã‚·ã‚§ãƒ«ã‚‚æˆ»ã‚Šã¾ã™ã€‚

//cmd{
$ exit
//}

æœ¬ä½“ã®ã‚·ã‚§ãƒ«ã«æˆ»ã£ãŸã¨ã“ã‚ã§ã€ä»®æƒ³OSã®ç’°å¢ƒã‚’åœæ­¢ã—ã¾ã™ã€‚

//cmd{
$ vagrant halt
//}

====[column] 

ã‚³ãƒãƒ³ãƒ‰ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã®ç›´å‰ã«ä¸‹è¨˜ã®ã‚ˆã†ãªWARNINGãŒè¡¨ç¤ºã•ã‚ŒãŸå ´åˆ:

//cmd{
_____________________________________________________________________
WARNING! Your environment specifies an invalid locale.
 This can affect your user experience significantly, including the
 ability to manage packages. You may install the locales by running:

   sudo apt-get install language-pack-UTF-8
     or
   sudo locale-gen UTF-8

To see all available language packs, run:
   apt-cache search "^language-pack-[a-z][a-z]$"
To disable this message for all users, run:
   sudo touch /var/lib/cloud/instance/locale-check.skip
_____________________________________________________________________
//}


Macå´ã§Terminalã®è¨­å®šã®ç¢ºèª:

//image[mac_ssh][OSX terminalã®è¨­å®š]{
Settings > Advanced > Set locale environment variables on startup ã«ãƒã‚§ãƒƒã‚¯ãƒãƒ¼ã‚¯ãŒã‚ã‚‹ã€‚
//}

æ¦‚è¦:

Macå´ã§Terminalã®localeã«LC_CTYPE=UTF-8ãŒè¨­å®šãŒã•ã‚Œã€UbuntuãŒè§£é‡ˆã§ããªã„ã®ã§ä»¥ä¸‹ã®ã‚ˆã†ãªè­¦å‘ŠãŒå ´åˆãŒã‚ã‚Šã¾ã™ã€‚

è§£æ±ºç­–:

"Set locale environment variables on startup"ã®å‰ã«ã‚ã‚‹ãƒã‚§ã‚¨ã‚¯ãƒãƒ¼ã‚¯ã‚’å¤–ã—ã¦ãã ã•ã„ã€‚

=== ansibleã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

OSXã«HomebrewãŒäº‹å‰ã«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¦ã„ã‚‹ã“ã¨ã‚’å‰æã«ansibleã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã‚’é€²ã‚ã¦ã„ãã¾ã™ã€‚

//cmd{
$ brew install ansible
//}

ä¸‹è¨˜ã®ã‚ˆã†ãªã‚¤ãƒ³ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ãŒé€²è¡Œã—ãƒ“ãƒ¼ãƒ«ã‚¸ãƒ§ãƒƒã‚­ã®è¡ŒãŒè¡¨ç¤ºã•ã‚Œã‚Œã°ã€ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã¯é †èª¿ã«å®Œäº†ã—ãŸã¨æ¨æ¸¬ã§ãã¾ã™ã€‚


//cmd{
==> Downloading https://github.com/ansible/ansible/archive/v1.4.5.tar.gz
Already downloaded: /Library/Caches/Homebrew/ansible-1.4.5.tar.gz
==> Downloading https://pypi.python.org/packages/source/p/pycrypto/pycrypto-2.6.
Already downloaded: /Library/Caches/Homebrew/ansible--pycrypto-2.6.tar.gz
==> python setup.py install --prefix=/usr/local/Cellar/ansible/1.4.5/libexec
==> Downloading https://pypi.python.org/packages/source/P/PyYAML/PyYAML-3.10.tar
Already downloaded: /Library/Caches/Homebrew/ansible--pyyaml-3.10.tar.gz
==> python setup.py install --prefix=/usr/local/Cellar/ansible/1.4.5/libexec
==> Downloading https://pypi.python.org/packages/source/p/paramiko/paramiko-1.11
Already downloaded: /Library/Caches/Homebrew/ansible--paramiko-1.11.0.tar.gz
==> python setup.py install --prefix=/usr/local/Cellar/ansible/1.4.5/libexec
==> Downloading https://pypi.python.org/packages/source/M/MarkupSafe/MarkupSafe-
Already downloaded: /Library/Caches/Homebrew/ansible--markupsafe-0.18.tar.gz
==> python setup.py install --prefix=/usr/local/Cellar/ansible/1.4.5/libexec
==> Downloading https://pypi.python.org/packages/source/J/Jinja2/Jinja2-2.7.1.ta
Already downloaded: /Library/Caches/Homebrew/ansible--jinja2-2.7.1.tar.gz
==> python setup.py install --prefix=/usr/local/Cellar/ansible/1.4.5/libexec
==> python setup.py install --prefix=/usr/local/Cellar/ansible/1.4.5
==> Caveats
Set PYTHONPATH if you need Python to find the installed site-packages:
  export PYTHONPATH=/usr/local/lib/python2.7/site-packages:$PYTHONPATH
==> Summary
ğŸº  /usr/local/Cellar/ansible/1.4.5: 763 files, 8.8M, built in 13 seconds
//}

ã“ã“ã§ã€ansibleã®å‹•ä½œç¢ºèªã‚’ã—ã¦ã¿ã¾ã™ã€‚

//cmd{
$ ansible --version
//}

ä»¥ä¸‹ã®ã‚ˆã†ã«ãƒãƒ¼ã‚¸ãƒ§ãƒ³ãŒè¡¨ç¤ºã•ã‚Œã‚Œã°ã€ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã¯æˆåŠŸã—ã¦ã„ã¾ã™ã€‚

//cmd{
ansible 1.4.5
//}


== ä»®æƒ³ãƒã‚·ãƒ³ã‚¤ãƒ¡ãƒ¼ã‚¸ã®è¨­å®š

=== Vagrantfileã®æº–å‚™

VirtualBoxã®å‹•ä½œã®è¨­å®šã€ä»®æƒ³OSã®è¨­å®šå¤‰æ›´ã€ã‚¢ãƒ—ãƒªã®è‡ªå‹•ã§ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã®ãŸã‚ã«ã€Vagrantã‚’å®Ÿè¡Œã™ã‚‹ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’åˆæœŸåŒ–ã—ãŸéš›ã«å‡ºæ¥ä¸ŠãŒã£ãŸVagrantfileã‚’ç·¨é›†ã—ã¦ã„ãã¾ã™ã€‚

å®Œæˆå¾Œã®Vagrantfileã¯ã€æ¬¡ã®ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚

//listnum[Vagrantfile_fnl][å®Œæˆã—ãŸ Vagrantfile]{
# -*- mode: ruby -*-
# vi: set ft=ruby :

VAGRANTFILE_API_VERSION = "2"

Vagrant.configure(VAGRANTFILE_API_VERSION) do |config|

  config.vm.box = "ubuntu"
  config.vm.network :forwarded_port, guest: 9000, host: 9000

  config.vm.provision "ansible" do |ansible|
    ansible.playbook = "playbook.yml"
  end

end
//}

==== VitrualBoxã®å‹•ä½œè¨­å®š

è‡ªå‹•ã§å‡ºæ¥ä¸ŠãŒã£ãŸVagrantfileã®ã‚³ãƒ¡ãƒ³ãƒˆéƒ¨åˆ†ã‚’å‰Šé™¤ã™ã‚‹ã¨æ¬¡ã®ã‚ˆã†ã«ãªã‚‹ã¯ãšã§ã™ã€‚

//listnum[Vagrantfile_org][ã‚ªãƒªã‚¸ãƒŠãƒ« Vagrantfile]{ 
# -*- mode: ruby -*-
# vi: set ft=ruby :

VAGRANTFILE_API_VERSION = "2"

Vagrant.configure(VAGRANTFILE_API_VERSION) do |config|
  config.vm.box = "ubuntu"
end
//}

æ¬¡ã®è¡Œã¯ã€VagrantfileãŒåˆ©ç”¨ã™ã‚‹APIã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã®æŒ‡å®šã‚’ã—ã¦ã„ã¾ã™ã€‚
//emlist{ 
VAGRANTFILE_API_VERSION = "2"
//}

ã“ã“ã§ç¤ºã—ãŸdo ~ endã®é–“ã«VirtualBoxãŒèµ·å‹•ã—ã¦ãã‚‹éš›ã«ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã¨ã—ã¦æŒ‡å®šã™ã‚‹é …ç›®ã‚’è¨˜è¿°ã—ã¦ã„ãã¾ã™ã€‚
//emlist{ 
Vagrant.configure(VAGRANTFILE_API_VERSION) do |config|

end
//}

"vagarant init"ã§ç”Ÿæˆã—ãŸç´ ã®Vagrantfileã§ã¯ã€ç”Ÿæˆæ™‚ã«æŒ‡å®šã—ãŸ"ubuntu"ã®ãƒã‚·ãƒ³ã‚¤ãƒ¡ãƒ¼ã‚¸ã®ã¿ãŒæŒ‡å®šã•ã‚Œã¦ã„ã¾ã™ã€‚

//emlist{ 
config.vm.box = "ubuntu"
//}


ã‚ªãƒªã‚¸ãƒŠãƒ«ã®Vagrantfileã®å†…å®¹ãŒæŠŠæ¡å‡ºæ¥ãŸã¨ã“ã‚ã§ã€è¿½åŠ ã®è¨­å®šã‚’è¨˜è¿°ã—ã¦ã„ãã“ã¨ã«ã—ã¾ã™ã€‚


==== å¾…ã¡å—ã‘Portã®forwadingè¨­å®š

ä»®æƒ³OSä¸Šã«èµ·å‹•ã•ã‚Œã¦ãŸRevelãŒãƒ–ãƒ©ã‚¦ã‚¶ãƒ¼ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆã«åå¿œã™ã‚‹ãŸã‚ã«å¾…ã¡å—ã‘ã¦ã„ã‚‹Portç•ªå·ã‚’ã€VirtualBoxã®Portç•ªå·ã¨é–¢é€£ä»˜ã‘ã‚’ã™ã‚‹ã“ã¨ã«ã—ã¾ã™ã€‚

//emlist{
config.vm.network :forwarded_port, guest: 9000, host: 9000
//}


==== OSã®è¨­å®šå¤‰æ›´

ãƒãƒ¼ãƒˆç•ªå·ã®é–¢é€£ä»˜ã‘ãŒæ¸ˆã‚“ã å¾Œã®è¨­å®šä½œæ¥­ã¯ã€ansibileã‚’ä½¿ã£ã¦é€²ã‚ã‚‹ã“ã¨ã«ã—ã¾ã™ã€‚

//emlist{
config.vm.provision "ansible" do |ansible|
  ansible.playbook = "playbook.yml"
end
//}

provisionãƒ„ãƒ¼ãƒ«ã®ansibleã‚’åˆ©ç”¨ã™ã‚‹ã“ã¨ã‚’å®£è¨€ã—ã€ansibleã«ã‚ˆã£ã¦ä»®æƒ³OSã‚’è¨­å®šã™ã‚‹å†…å®¹ãŒplaybook.ymlã«è¨˜è¿°ã•ã‚Œã¦ã„ã‚‹ã“ã¨ã‚’å®£è¨€ã—ã¦ã„ã¾ã™ã€‚


=== playbook.yamlã®æº–å‚™

Vagrantfileã«è¨­å®šå†…å®¹ã®è©³ç´°ã‚’è¨˜è¿°ã™ã‚‹ãƒ•ã‚¡ã‚¤ãƒ«ã¨ã—ã¦å®£è¨€ã—ã¦ãŠã„ãŸplaybook.yamlã®æº–å‚™ã™ã‚‹ã“ã¨ã«ã—ã¾ã™ã€‚

å®Œæˆå¾Œã®playbook.yamlã¯ã€æ¬¡ã®æ§˜ãªå†…å®¹ã«ãªã‚Šã¾ã™ã€‚ansibleãŒã€ã“ã®ãƒ•ã‚¡ã‚¤ãƒ«ã®å†…å®¹ã‚’ä¸Šã‹ã‚‰é †ç•ªã«å‡¦ç†ã—ã€ä»®æƒ³OSç’°å¢ƒã«è¨­å®šå¤‰æ›´å®Ÿæ–½ã—ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¾ã™ã€‚

//listnum[playbook][playbook.yaml]{
---
- hosts: all

  user: vagrant
  tasks:

    - name: "update hosts"
      copy: src=files/hosts
            dest=/etc/hosts
            owner=root
            group=root
            mode=644
            backup=yes
      sudo: yes

    - name: "apt-get install golang"
      apt:  pkg=golang
            update_cache=yes
            cache_valid_time=3600
      sudo: yes

    - name: "apt-get install git"
      apt:  pkg=git
            update_cache=yes
            cache_valid_time=3600
      sudo: yes

    - name: "apt-get install mercurial"
      apt:  pkg=mercurial
            update_cache=yes
            cache_valid_time=3600
      sudo: yes

    - name: "apt-get install sqlite"
      apt:  pkg=sqlite
            update_cache=yes
            cache_valid_time=3600
      sudo: yes

    - name: "apt-get install slibsqlite3-dev"
      apt:  pkg=libsqlite3-dev
            update_cache=yes
            cache_valid_time=3600
      sudo: yes

    - name: "apt-get install language-pack-en-base"
      apt:  pkg=language-pack-en-base
      sudo: yes

    - name: "apt-get install language-pack-ja-base"
      apt:  pkg=language-pack-ja-base
            update_cache=yes
            cache_valid_time=3600
      sudo: yes

    - name: "apt-get install tree"
      apt:  pkg=tree
            update_cache=yes
            cache_valid_time=3600
      sudo: yes

    - name: "update bashrc"
      copy: src=files/.bashrc
            dest=/home/vagrant/.bashrc
            owner=vagrant
            group=vagrant
            mode=644
            backup=yes

    - name: "mkdir gocode"
      command:  mkdir /home/vagrant/gocode
                creates=/home/vagrant/gocode

    - name: "go get github.com/robfig/revel"
      shell:  export GOPATH=/home/vagrant/gocode && cd /home/vagrant/gocode 
              && go get github.com/robfig/revel
              creates=/home/vagrant/gocode/src/github.com/robfig/revel

    - name: "go get github.com/robfig/revel/revel"
      shell:  export GOPATH=/home/vagrant/gocode && cd /home/vagrant/gocode
              && go get github.com/robfig/revel/revel
              creates=/home/vagrant/gocode/bin/revel

    - name: "go get github.com/coopernurse/gorp"
      shell:  export GOPATH=/home/vagrant/gocode && cd /home/vagrant/gocode
              && go get github.com/coopernurse/gorp
              creates=/home/vagrant/gocode/src/github.com/coopernurse/gorp

    - name: "go get github.com/mattn/go-sqlite3"
      shell:  export GOPATH=/home/vagrant/gocode && cd /home/vagrant/gocode
              && go get github.com/mattn/go-sqlite3
              creates=/home/vagrant/gocode/src/github.com/mattn/go-sqlite3

    - name:  "revel new myapp"
      shell:  export GOPATH=/home/vagrant/gocode && && cd /home/vagrant/gocode
              && revel  run myapp
              creates=/home/vagrant/gocode/src/myapp
//}

ansbileã§ã¯ã€å„è¨­å®šé …ç›®ã‚’ã‚¿ã‚¹ã‚¯ã¨å‘¼ã³ã¾ã™ã€‚
ã‚¿ã‚¹ã‚¯ã¯ã€æ¬¡ã®ã‚ˆã†ãªæ›¸å¼ã«ãªã‚Šã¾ã™ã€‚

//emlist{
- name: [ã‚¿ã‚¹ã‚¯ã®åå‰]
  [ä½¿ç”¨ã™ã‚‹ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«]: [ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã§è¦å®šã•ã‚ŒãŸæ›¸å¼]
  [ã‚ªãƒ—ã‚·ãƒ§ãƒ³]: [ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã§æŒ‡å®šã•ã‚Œã¦æ›¸å¼]
//}

ã‚¿ã‚¹ã‚¯ã®åå‰ã¯ã€è‡ªç”±ã«ä»˜ã‘ã¦ã‚‚å¤§ä¸ˆå¤«ã§ã™ã€‚ä½¿ç”¨ã™ã‚‹ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚„ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã®è©³ç´°ã¯ã€ansibleãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚µã‚¤ãƒˆ URL:@<href>{http://docs.ansible.com/}ã‚’å‚è€ƒã«ã—ã¦ãã ã•ã„ã€‚  


==== hostsã®è¨­å®š

ã“ã®æœ¬ã‚’åŸ·ç­†ã—ã¦ã„ã‚‹æœŸé–“ä¸­ä½•åº¦ã‹ã€ubuntuã®packageã‚’ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã™ã‚‹ãŸã‚ã®ãƒªãƒã‚¸ãƒˆãƒªãƒ¼ã‚µãƒ¼ãƒã®IPã‚¢ãƒ‰ãƒ¬ã‚¹ã®è§£æ±ºãŒDNSçµŒç”±ã§ã¯ã§ããªããªã‚‹ã‚±ãƒ¼ã‚¹ãŒã‚ã‚Šã¾ã—ãŸã€‚æœŸé–“ä¸­DNSã§ã¯å®‰å®šã—ãªã‹ã£ãŸãŸã‚ã€ubuntuã®ãƒªãƒã‚¸ãƒˆãƒªãƒ¼ã‚µãƒ¼ãƒãƒ¼ã®IPã‚¢ãƒ‰ãƒ¬ã‚¹æƒ…å ±ã‚’/etc/hostsã«é™çš„ã«è¿½è¨˜ã—ã€ãã®æƒ…å ±ã‚’åŸºã«apt-getã®ã‚³ãƒãƒ³ãƒ‰ãŒãƒªãƒã‚¸ãƒˆãƒªãƒ¼ã‚µãƒ¼ãƒã®åå‰è§£æ±ºã‚’ã™ã‚‹ã‚ˆã†ã«ã—ã¾ã—ãŸã€‚

ä»®æƒ³OSç’°å¢ƒã®/etc/hostsã‚’ä¸Šæ›¸ãã™ã‚‹ãŸã‚ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’è»¢é€ã™ã‚‹ãŸã‚ã«ansibleã®copyãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ä½¿ç”¨ã—ã¾ã™ã€‚

//emlist{
- name: "update hosts"
  copy: src=files/hosts
        dest=/etc/hosts
        owner=root
        group=root
        mode=644
        backup=yes
  sudo: yes
//}

/etc/hostsã¯ä¸Šæ›¸ãã¯ã€rootæ¨©é™ãŒå¿…è¦ãªã®ã§sudoã®æ¨©é™ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚‚è¨­å®šã—ã¦ã¾ã™ã€‚


==== Goè¨€èªã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

Goè¨€èªã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã¯ã€ubuntuæ¨™æº–ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ä½¿ç”¨ã™ã‚‹ã“ã¨ã«ã—ã¾ã™ã€‚ 
å¾“ã£ã¦ã€ansbileã®aptãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’ä½¿ã£ã¦ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ã“ã¨ã«ã—ã¾ã™ã€‚  

//emlist{
    - name: "apt-get install golang"
      apt:  pkg=golang
            update_cache=yes
            cache_valid_time=3600
      sudo: yes
//}

update_cache, cache_valid_timeã¯ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã®è¨­å®šã§ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®updateã®é »åº¦ã‚’ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«ã—ã¦ã„ã¾ã™ã€‚


==== DBãã®ä»–ã®debãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

apt-getã§Goè¨€èªã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ãŸå¾Œã¯ã€Revelã‚’åˆ©ç”¨ã™ã‚‹ã®ã«å¿…è¦ã«ãªã‚‹ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦ã„ã¾ã™ã€‚

å„ã‚¿ã‚¹ã‚¯ã®nameã®éƒ¨åˆ†ã«è¨­å®šã—ãŸå†…å®¹ã®ä½œæ¥­ã‚’ã€ãã‚Œãã‚Œå®Ÿè¡Œã—ã¦ã„ã¾ã™ã€‚

 * apt-get install git
 * apt-get install mercurial
 * apt-get install sqlite
 * apt-get install slibsqlite3-dev
 * apt-get install language-pack-en-base(localeã«ã‚ˆã‚‹ã‚¨ãƒ©ãƒ¼ã®å¯¾ç­–)
 * apt-get install language-pack-ja-base(localeã«ã‚ˆã‚‹ã‚¨ãƒ©ãƒ¼ã®å¯¾ç­–)
 * apt-get install tree (ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã®treeè¡¨ç¤ºã•ã›ã‚‹ãŸã‚)


==== Revelã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

Revelã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã¯ã€ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚µã‚¤ãƒˆã®
@<href>{http://robfig.github.io/revel/tutorial/gettingstarted.html, Getting Startedãƒšãƒ¼ã‚¸}ã‚’å‚è€ƒã«é€²ã‚ã¦ã„ãã“ã¨ã«ã—ã¾ã™ã€‚

æ¬¡ã¯ã€ä»®æƒ³OSã«sshã§ã‚¢ã‚¯ã‚»ã‚¹ã—ãŸéš›ã«ã®èµ·å‹•Shellã«GOè¨€èªã®ç’°å¢ƒPATHãŒè¨­å®šã•ã‚Œã„ã‚‹ã‚ˆã†ã«~/.bashrcã‚’ä¸Šæ›¸è¨˜ã—ã¾ã™ã€‚
.bashrcã‚‚ã€hostsã¨åŒæ§˜ã«copyãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’ä½¿ã£ã¦è»¢é€ã™ã‚‹ã“ã¨ã«ã—ã¾ã™ã€‚
~/vagrant-env/files/ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ä»®æƒ³OSç’°å¢ƒã¸è»¢é€ã™ã‚‹ãŸã‚ã®.bashrcã‚’è¨­ç½®ã—ã¦ãŠãã¾ã™ã€‚

//emlist{
- name: "update bashrc"
  copy: src=files/.bashrc
        dest=/home/vagrant/.bashrc
        owner=vagrant
        group=vagrant
        mode=644
        backup=yes
//}

è»¢é€å…ƒã®.bashrcã¯ã€ubuntuã®ä¸€èˆ¬çš„ãª.bashrcã«ä¸‹è¨˜ã®3è¡Œã‚’è¿½è¨˜ã—ãŸã‚‚ã«ãªã‚Šã¾ã™ã€‚
å®Ÿéš›ã«å¤‰æ›´ã—ãŸ.bashrcã®ã‚µãƒ³ãƒ—ãƒ«ã¯ä»˜éŒ²Aã«æ²è¼‰ã—ã¦ã‚ã‚Šã¾ã™ã€‚

GOPATHã¯ã€GOè¨€èªã®ç’°å¢ƒPATHã§è‡ªç”±ã«æ±ºã‚ã‚‹ã“ã¨ãŒå‡ºæ¥ã¾ã™ã€‚ã“ã“ã§æ±ºã‚ãŸPATHã«åˆã‚ã›ã¦GOè¨€èªç”¨ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’ä½œã‚‹ã“ã¨ã«æˆã‚Šã¾ã™ã€‚åˆã€$GOPATH/binã«ã¯ã€GOè¨€èªã®ãƒ“ãƒ«ãƒ‰å¾Œã®
ãƒã‚¤ãƒŠãƒªãƒ¼ãƒ•ã‚¡ã‚¤ãƒ«ãŒä¿å­˜ã•ã‚Œã¾ã™ã€‚å¾“ã£ã¦ã€Shellã®å®Ÿè¡ŒPATHã«ã€ã“ã®binãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãƒ¼ã‚‚è¿½åŠ ã—ã¦ãŠãã¾ã™ã€‚

//emlist{
# golang env
export GOPATH=/home/vagrant/gocode
export PATH=$PATH:/home/vagrant/gocode/bin
//}

å…ˆã«æŒ‡å®šã—ãŸGOPATHã«åŸºã¥ã„ã¦ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’ä½œã‚Šã¾ã™ã€‚
æ—¢ã«è©²å½“ã®ã‚ã‚‹å ´åˆã¯å†åº¦ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’ä½œã‚‰ãªã„ã‚ˆã†ã«ã€createsã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’æŒ‡å®šã—ã¦ãŠãã¾ã™ã€‚

//emlist{
- name: "mkdir gocode"
  command:  mkdir /home/vagrant/gocode
            creates=/home/vagrant/gocode
//}

æ¬¡ã®ãƒ–ãƒ­ãƒƒã‚¯ã¯ã€"go get github.com/robfig/revel"ã®ã‚·ã‚§ãƒ«ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ã¦ã„ã¾ã™ã€‚
ã“ã®ã‚·ã‚§ãƒ«ã‚³ãƒãƒ³ãƒ‰ã¯ã€githubã‚ˆã‚Šrevelã®ã‚½ãƒ¼ã‚¹ã‚’å–å¾—ã—ã€$GOPATH/srcä»¥ä¸‹ã«ä¿å­˜ã—ã¦ãã‚Œã¾ã™ã€‚
æ—¢ã«è©²å½“ã®ã‚ã‚‹å ´åˆã¯å†åº¦ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’ä½œã‚‰ãªã„ã‚ˆã†ã«ã€createsã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’æŒ‡å®šã—ã¦ãŠãã¾ã™ã€‚

//emlist{
- name: "go get github.com/robfig/revel"
  shell:  export GOPATH=/home/vagrant/gocode && cd /home/vagrant/gocode 
          && go get github.com/robfig/revel
          creates=/home/vagrant/gocode/src/github.com/robfig/revel
//}

æ¬¡ã®ãƒ–ãƒ­ãƒƒã‚¯ã¯ã€"go get github.com/robfig/revel/revel"ã®ã‚·ã‚§ãƒ«ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ã¦ã„ã¾ã™ã€‚
ã“ã®ã‚·ã‚§ãƒ«ã‚³ãƒãƒ³ãƒ‰ã¯ã€$GOPATH/binä»¥ä¸‹ã«ã€revelã®ãƒã‚¤ãƒŠãƒªã‚’ç”Ÿæˆã—ã¦ãã‚Œã¾ã™ã€‚
æ—¢ã«è©²å½“ã®ã‚ã‚‹å ´åˆã¯å†åº¦ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’ä½œã‚‰ãªã„ã‚ˆã†ã«ã€createsã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’æŒ‡å®šã—ã¦ãŠãã¾ã™ã€‚

//emlist{
- name: "go get github.com/robfig/revel/revel"
  shell:  export GOPATH=/home/vagrant/gocode && cd /home/vagrant/gocode
          && go get github.com/robfig/revel/revel
          creates=/home/vagrant/gocode/bin/revel
//}

BDã‚’ä½¿ç”¨ã—ãªã„å ´åˆã¯ã€ã“ã“ã¾ã§Revelã®çµ‚äº†ã€‚


==== DB(Sqlite)ã‚’ä½¿ç”¨ã™ã‚‹ãŸã‚ã®GOè¨€èªé–¢é€£ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

ä»Šå›ã¯ã€DBã‚‚ä½¿ç”¨ã—ãŸã„ã®ã§å¼•ãç¶šãDBé–¢é€£ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ã“ã¨ã«ã—ã¾ã™ã€‚

æ¬¡ã®ãƒ–ãƒ­ãƒƒã‚¯ã¯ã€"go get github.com/coopernurse/gorp"ã®ã‚·ã‚§ãƒ«ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ã¦ã„ã¾ã™ã€‚
ã“ã®ã‚·ã‚§ãƒ«ã‚³ãƒãƒ³ãƒ‰ã¯ã€GOè¨€èªã‹ã‚‰DBã‚’æ“ä½œã™ã‚‹ãŸã‚ã®ORMã®ã‚ˆã†ãªgorpãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’githubã‚ˆã‚Šå–å¾—ã—ã€$GOPATH/srcä»¥ä¸‹ã«ä¿å­˜ã—ã¦ãã‚Œã¾ã™ã€‚
æ—¢ã«è©²å½“ã®ã‚ã‚‹å ´åˆã¯å†åº¦ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’ä½œã‚‰ãªã„ã‚ˆã†ã«ã€createsã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’æŒ‡å®šã—ã¦ãŠãã¾ã™ã€‚

//emlist{
- name: "go get github.com/coopernurse/gorp"
  shell:  export GOPATH=/home/vagrant/gocode && cd /home/vagrant/gocode
          && go get github.com/coopernurse/gorp
          creates=/home/vagrant/gocode/src/github.com/coopernurse/gorp
//}

æ¬¡ã®ãƒ–ãƒ­ãƒƒã‚¯ã¯ã€"go get github.com/mattn/go-sqlite3"ã®ã‚·ã‚§ãƒ«ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ã¦ã„ã¾ã™ã€‚
ã“ã®ã‚·ã‚§ãƒ«ã‚³ãƒãƒ³ãƒ‰ã¯ã€GOè¨€èªã‹ã‚‰sqliteã‚’ä½¿ç”¨ã™ã‚‹ãŸã‚ã®ãƒ‰ãƒ©ã‚¤ãƒãƒ¼ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’githubã‚ˆã‚Šå–å¾—ã—ã€$GOPATH/srcä»¥ä¸‹ã«ä¿å­˜ã—ã¦ãã‚Œã¾ã™ã€‚
æ—¢ã«è©²å½“ã®ã‚ã‚‹å ´åˆã¯å†åº¦ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’ä½œã‚‰ãªã„ã‚ˆã†ã«ã€createsã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’æŒ‡å®šã—ã¦ãŠãã¾ã™ã€‚

//emlist{
- name: "go get github.com/mattn/go-sqlite3"
  shell:  export GOPATH=/home/vagrant/gocode && cd /home/vagrant/gocode
          && go get github.com/mattn/go-sqlite3
          creates=/home/vagrant/gocode/src/github.com/mattn/go-sqlite3
//}

ã“ã‚Œã§ã€DBã‚‚æ‰±ãˆã‚‹ç’°å¢ƒã‚‚å«ã‚ã¦ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ãŸã‚ã®ã€VagrantfileãŒå®Œæˆã—ã¾ã—ãŸã€‚ 


=== Revelã‚’èµ·å‹•

ä»Šå›ã¯ã€ãƒ—ãƒ­ãƒ“ã‚¸ãƒ§ãƒ³ã®ãƒ—ã‚·ãƒ§ãƒ³ã‚’ä»˜ã‘ã¦ä»®æƒ³OSã‚’vagrantã‹ã‚‰èµ·å‹•ã—ã¾ã™ã€‚

//cmd{
$ vagrant up --provision  
//}

èµ·å‹•ã®é€”ä¸­ã«ã€sshã§ä½¿ç”¨ã™ã‚‹RSA keyã«é–¢ã™ã‚‹å•åˆã›ãŒã‚ã‚Šã¾ã™ã®ã§ã€"yes"ã¨å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚
ãƒ—ãƒ­ãƒ“ã‚¸ãƒ§ãƒ³ã®ãƒ—ãƒ­ã‚»ã‚¹ãŒçµ‚äº†ã™ã‚‹ã¾ã§ã«ã¯ã€ã—ã°ã‚‰ãæ™‚é–“ãŒã‹ã‹ã‚Šã¾ã™ã€‚æ¬¡ã®ã‚ˆã†ãªå®Ÿè¡ŒçµæœãŒè¡¨ç¤ºã•ã‚Œã‚Œã°çµ‚äº†ã§ã™ã€‚

//cmd{
Bringing machine 'default' up with 'virtualbox' provider...
[default] Clearing any previously set forwarded ports...
[default] Clearing any previously set network interfaces...
[default] Preparing network interfaces based on configuration...
[default] Forwarding ports...
[default] -- 22 => 2222 (adapter 1)
[default] -- 9000 => 9000 (adapter 1)
[default] Booting VM...
[default] Waiting for machine to boot. This may take a few minutes...
[default] Machine booted and ready!
[default] Mounting shared folders...
[default] -- /vagrant
[default] Running provisioner: ansible...

PLAY [all] ******************************************************************** 

GATHERING FACTS *************************************************************** 
The authenticity of host '[127.0.0.1]:2222 ([127.0.0.1]:2222)' can't be established.
RSA key fingerprint is e7:a6:12:c6:ef:17:90:c9:69:46:c0:4a:83:b8:fb:0c.
Are you sure you want to continue connecting (yes/no)? yes
ok: [default]

TASK: [update hosts] ********************************************************** 
changed: [default]

TASK: [apt-get install golang] ************************************************ 
changed: [default]

TASK: [apt-get install git] *************************************************** 
changed: [default]

TASK: [apt-get install mercurial] ********************************************* 
changed: [default]

TASK: [apt-get install sqlite] ************************************************ 
changed: [default]

TASK: [apt-get install slibsqlite3-dev] *************************************** 
changed: [default]

TASK: [apt-get install language-pack-en-base] ********************************* 
changed: [default]

TASK: [apt-get install language-pack-ja-base] ********************************* 
changed: [default]

TASK: [apt-get install tree] ************************************************** 
changed: [default]

TASK: [update bashrc] ********************************************************* 
changed: [default]

TASK: [mkdir gocode] ********************************************************** 
changed: [default]

TASK: [go get github.com/robfig/revel] **************************************** 
changed: [default]

TASK: [go get github.com/robfig/revel/revel] ********************************** 
changed: [default]

TASK: [go get github.com/coopernurse/gorp] ************************************ 
changed: [default]

TASK: [go get github.com/mattn/go-sqlite3] ************************************ 
changed: [default]

PLAY RECAP ******************************************************************** 
default                    : ok=16   changed=15   unreachable=0    failed=0 
//}

ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆãŒæˆ»ã£ã¦ããŸã‚‰ã€æœ¬ä½“OSã‹ã‚‰ä»®æƒ³OSã«sshã§æ¥ç¶šã—ã¾ã™ã€‚

//cmd{
$ vagrant ssh
$ ls
//}

å…ˆã»ã©ç¢ºèªã—ãŸubuntuã®ãƒ­ã‚°ã‚¤ãƒ³ç”»é¢ãŒè¡¨ç¤ºã•ã‚Œã€lsãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ãŸã¨ã“ã‚ã§gocodeã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãƒ¼ãŒè¡¨ç¤ºã•ã‚Œã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèªã—ã¾ã™ã€‚

gocodeãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãƒ¼ã«ç§»å‹•ã—ã€Revelã‚’ä½¿ã£ã¦é–‹ç™ºã—ã¦ã„ããŸã‚ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãƒ¼æ§‹æˆã®é››å½¢ã‚’ç”Ÿæˆã™ã‚‹ã“ã¨ã«ã—ã¾ã™ã€‚

//cmd{
$ cd ~/gocode
$ revel new myapp
//}

~/gocode/src/myappãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªä»¥ä¸‹ã«æ¬¡ã®ã‚ˆã†ãªé››å½¢ãŒç”Ÿæˆã•ã‚Œã¾ã—ãŸã€‚

//cmd{
.
â”œâ”€â”€ app
â”‚Â Â  â”œâ”€â”€ controllers
â”‚Â Â  â”‚Â Â  â””â”€â”€ app.go
â”‚Â Â  â”œâ”€â”€ init.go
â”‚Â Â  â””â”€â”€ views
â”‚Â Â      â”œâ”€â”€ App
â”‚Â Â      â”‚Â Â  â””â”€â”€ Index.html
â”‚Â Â      â”œâ”€â”€ debug.html
â”‚Â Â      â”œâ”€â”€ errors
â”‚Â Â      â”‚Â Â  â”œâ”€â”€ 404.html
â”‚Â Â      â”‚Â Â  â””â”€â”€ 500.html
â”‚Â Â      â”œâ”€â”€ flash.html
â”‚Â Â      â”œâ”€â”€ footer.html
â”‚Â Â      â””â”€â”€ header.html
â”œâ”€â”€ conf
â”‚Â Â  â”œâ”€â”€ app.conf
â”‚Â Â  â””â”€â”€ routes
â”œâ”€â”€ messages
â”‚Â Â  â””â”€â”€ sample.en
â”œâ”€â”€ public
â”‚Â Â  â”œâ”€â”€ css
â”‚Â Â  â”‚Â Â  â””â”€â”€ bootstrap.css
â”‚Â Â  â”œâ”€â”€ img
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ favicon.png
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ glyphicons-halflings.png
â”‚Â Â  â”‚Â Â  â””â”€â”€ glyphicons-halflings-white.png
â”‚Â Â  â””â”€â”€ js
â”‚Â Â      â””â”€â”€ jquery-1.9.1.min.js
â””â”€â”€ tests
    â””â”€â”€ apptest.go

12 directories, 18 files
//}

myappã‚’èµ·å‹•ã—ã¦ã¿ã¾ã™ã€‚

//cmd{
$ revel run myapp
//}

æœ¬ä½“OSã§ãƒ–ãƒ©ã‚¦ã‚¶ãƒ¼ã‚’èµ·å‹•ã—ã€http://localhost:9000ã«ã‚¢ã‚¯ã‚»ã‚¹ã—ã¾ã™ã€‚
æ¬¡ã®ã‚ˆã†ãªç”»é¢ãŒãƒ–ãƒ©ã‚¦ã‚¶ãƒ¼ã«è¡¨ç¤ºã•ã‚Œã‚Œã°ã€å§‹ã‚ã¦ã®Revelã¯å®Œæˆã§ã™ã€‚


//image[result_page][myappå®Œæˆãƒšãƒ¼ã‚¸]{
//}

== Githubã§ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã‚’ç®¡ç†ã™ã‚‹ãŸã‚ã®æº–å‚™  



